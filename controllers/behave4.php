<?phpclass Behave4 extends Controller{    private $ivr_message;        function __construct() {        $this->ivr_message=(object) parse_ini_file('application/ivr_message.ini');    }        	function index(){		$data['ivr_ask_amount']=$this->ivr_message->ask_amount;		$data['redirect']=Config::$base_url."/behave4/get_amount.php";		$this->loadView('twiml/twiml_ask_amount',$data);		}			function get_amount(){		$amount=$_REQUEST['Digits'];		$amount=str_replace("*", ".", $amount);		$data['confirm']=implode(' ',str_split($amount));		$data['ivr_say_amount']=$this->ivr_message->say_amount;		$data['ivr_amount_confirm']=$this->ivr_message->amount_confirm;		$data['redirect'] = Config::$base_url."/behave4/confirm_amount/$amount.php";		$this->loadView('twiml/twiml_confirm_amount',$data);	}		function confirm_amount(){		$params=$this->urlPara();		$amount=$params[0];		$order['phone']=  user_in_filter($_REQUEST['From']);		$order['order_id']='';		$order['amount']=$amount;		$confirm=$_REQUEST['Digits'];		if($confirm==1){			$this->loadModel('orders_model');			$orders_model=new Orders_model();			$this->loadModel('transactions');			$transactions=new Transactions();			$ord_id=$orders_model->create_phone_order($order);				$txnid=$transactions->initiate($ord_id);				$data['redirect']=  Config::$base_url."/twiml/confirm_payment/".$txnid.".php";				$data['amount']=$amount;		        $data['ivr_amount']=  $this->ivr_message->amount;		        $data['amount_confirmation']= $this->ivr_message->amount_confirmation;		        $this->loadView('twiml/twiml_amount_confirm',$data);					}else{			$go=Config::$base_url."/behave4.php";			header('location:'.$go);		}	}        //end of class    }